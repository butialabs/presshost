# ============================================
# DISK CACHE PLUGIN SUPPORT
# ============================================
# This file provides NGINX-level support for WordPress/ClassicPress
# cache plugins that save files to disk

# WP Super Cache - Serve static HTML files
location ~ /wp-content/cache/supercache/.*\.html$ {
    expires 30d;
    access_log off;
    add_header Cache-Control "public, must-revalidate";
    add_header X-Cache-Handler "wp-super-cache";
}

# W3 Total Cache - Minified CSS files
location ~ /wp-content/cache/minify/.*\.css$ {
    expires 31536000s;
    access_log off;
    add_header Cache-Control "public, immutable";
    add_header X-Cache-Handler "w3-total-cache-minify";
    gzip_static on;
}

# W3 Total Cache - Minified JS files
location ~ /wp-content/cache/minify/.*\.js$ {
    expires 31536000s;
    access_log off;
    add_header Cache-Control "public, immutable";
    add_header X-Cache-Handler "w3-total-cache-minify";
    gzip_static on;
}

# W3 Total Cache - Page cache (HTML)
location ~ /wp-content/cache/page_enhanced/.*\.html$ {
    expires 30d;
    access_log off;
    add_header Cache-Control "public, must-revalidate";
    add_header X-Cache-Handler "w3-total-cache-page";
}

# WP Fastest Cache - Static HTML files
location ~ /wp-content/cache/all/.*\.html$ {
    expires 30d;
    access_log off;
    add_header Cache-Control "public, must-revalidate";
    add_header X-Cache-Handler "wp-fastest-cache";
}

# WP Fastest Cache - Minified files
location ~ /wp-content/cache/wpfc-minified/.*\.(js|css)$ {
    expires 31536000s;
    access_log off;
    add_header Cache-Control "public, immutable";
    add_header X-Cache-Handler "wp-fastest-cache-minify";
}

# WP Fastest Cache - Mobile cache
location ~ /wp-content/cache/wpfc-mobile-cache/.*\.html$ {
    expires 30d;
    access_log off;
    add_header Cache-Control "public, must-revalidate";
    add_header X-Cache-Handler "wp-fastest-cache-mobile";
}

# Cache Enabler - Static HTML files
location ~ /wp-content/cache/cache-enabler/.*\.html$ {
    expires 30d;
    access_log off;
    add_header Cache-Control "public, must-revalidate";
    add_header X-Cache-Handler "cache-enabler";
}

# Generic cache files - fallback for other plugins
location ~ /wp-content/cache/.*\.(html|css|js)$ {
    expires 30d;
    access_log off;
    add_header Cache-Control "public";
    add_header X-Cache-Handler "generic-cache";
}

# Prevent direct access to cache configuration files
location ~ /wp-content/cache/.*\.(php|htaccess|config)$ {
    deny all;
}