# Yoast
## sitemaps
location ~ ([^/]*)sitemap(.*).x(m|s)l$ {
	## this rewrites sitemap.xml to /sitemap_index.xml
	rewrite ^/sitemap.xml$ /sitemap_index.xml permanent;
	## this makes the XML sitemaps work
	rewrite ^/([a-z]+)?-?sitemap.xsl$ /index.php?yoast-sitemap-xsl=$1 last;
	rewrite ^/sitemap_index.xml$ /index.php?sitemap=1 last;
	rewrite ^/([^/]+?)-sitemap([0-9]+)?.xml$ /index.php?sitemap=$1&sitemap_n=$2 last;

	## News SEO
	rewrite ^/news-sitemap.xml$ /index.php?sitemap=wpseo_news last;
	## Local SEO
	rewrite ^/locations.kml$ /index.php?sitemap=wpseo_local_kml last;
	rewrite ^/geo-sitemap.xml$ /index.php?sitemap=wpseo_local last;
	## Video SEO
	rewrite ^/video-sitemap.xsl$ /index.php?yoast-sitemap-xsl=video last;
	set $skip_cache 1;
}

# TXT
## llms
location = /llms.txt {
	try_files /wp-content/uploads/llms.txt =404;
	log_not_found off;
	access_log off;
	set $skip_cache 1;
}

# Ads.txt
location = /ads.txt {
	try_files $uri $uri/ /index.php?$args;
	add_header Cache-Control "public, max-age=3600";
	add_header Content-Type "text/plain";
	log_not_found off;
	access_log off;
	set $skip_cache 1;
}

# GSC
## Fix urls ends with /core
location ~ ^(.+)/core$ {
    return 301 $1/;
}